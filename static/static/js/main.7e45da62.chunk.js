(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{176:function(e,t,a){},177:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(54),o=(a(64),a(2)),l=a(55),c=a.n(l),u=(a(81),a(19)),m=a(56),s=(a(176),function(e){var t={fill:!1,lineTension:.1,pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(0,0,0,0.5)",pointRadius:1,pointHitRadius:10},a={labels:e.labels.flat(),datasets:[Object(u.a)({label:"max"},t,{borderColor:"rgba(192,75,75,1)",data:e.values.max.flat()}),Object(u.a)({label:"average"},t,{borderColor:"rgba(75,192,192,1)",data:e.values.middle.flat()}),Object(u.a)({label:"min"},t,{borderColor:"rgba(75,192,75,1)",data:e.values.min.flat()})]};return r.a.createElement("div",{className:"graph"},r.a.createElement(m.a,{data:a,options:{scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!0},ticks:{beginAtZero:!0,userCallback:function(e){return e=(e=(e=e.toString()).split(/(?=(?:...)*$)/)).join("."),"".concat(e)}}}]},legend:{display:!0,position:"right"},tooltips:{enabled:!0}}}))}),f={min:[],middle:[],max:[]},d="https://gabno.herokuapp.com/history",b=function(e,t){return(t-e)/6e4>2?(t-e)/6e4-1:0},p=function(e,t,a){var n=new Date(e.valueOf()+6e4*t);return a?n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate():n.getMinutes()>9?n.getHours()+":"+n.getMinutes():n.getHours()+":0"+n.getMinutes()},g=a(58),v=(a(177),function(e){var t=Object(g.a)(),a=t.register,i=t.handleSubmit,l=t.watch,c=Object(n.useState)(new Date),u=Object(o.a)(c,2),m=u[0],s=u[1],f=Object(n.useState)(!0),d=Object(o.a)(f,2),b=d[0],v=d[1];Object(n.useEffect)((function(){s(new Date)}),[]);var O=function(){v(!b),console.log(b)},E=r.a.createElement("div",null,r.a.createElement("p",null,"From:"),r.a.createElement("form",{onSubmit:i((function(){e.deleg2(l("fromDate"),l("fromTime"),l("toDate"),l("toTime")),e.deleg1(('?from="'+l("fromDate")+"T"+l("fromTime")+'"&to="'+l("toDate")+"T"+function(e,t){var a=new Date(new Date(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"T"+t).valueOf()+6e4);return a.getMinutes()>9?a.getHours()+":"+a.getMinutes():a.getHours()+":0"+a.getMinutes()}(m,l("toTime"))+'"').replace(" ",""))}))},r.a.createElement("input",{type:"date",name:"fromDate",ref:a,defaultValue:p(m,-10,!0)}),r.a.createElement("input",{type:"time",name:"fromTime",ref:a,defaultValue:p(m,-10,!1)}),r.a.createElement("p",null,"To:"),r.a.createElement("input",{type:"date",name:"toDate",ref:a,defaultValue:p(m,0,!0)}),r.a.createElement("input",{type:"time",name:"toTime",ref:a,defaultValue:p(m,0,!1)}),r.a.createElement("br",null),r.a.createElement("input",{className:"my-button",type:"submit",value:"Ok"})));return b?r.a.createElement("div",null,r.a.createElement("button",{onClick:O},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0435\u0440\u0438\u043e\u0434")):r.a.createElement("div",null,r.a.createElement("button",{onClick:O},"\u0421\u043a\u0440\u044b\u0442\u044c"),E)}),O=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),i=a[0],l=a[1];return Object(n.useEffect)((function(){l(e.fromTime+" "+e.fromDate+" - "+e.toTime+" "+e.toDate)}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"\u041f\u0435\u0440\u0438\u043e\u0434: ",i," "))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(i.render)(r.a.createElement((function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)([]),u=Object(o.a)(l,2),m=u[0],g=u[1],E=Object(n.useState)(f),j=Object(o.a)(E,2),D=j[0],h=j[1],w=Object(n.useState)(p(new Date,-60,!0)),y=Object(o.a)(w,2),T=y[0],S=y[1],M=Object(n.useState)(p(new Date,-60,!1)),k=Object(o.a)(M,2),x=k[0],A=k[1],C=Object(n.useState)(p(new Date,0,!0)),H=Object(o.a)(C,2),V=H[0],W=H[1],N=Object(n.useState)(p(new Date,0,!1)),B=Object(o.a)(N,2),F=B[0],R=B[1];Object(n.useEffect)((function(){i(!0),L(d)}),[]);var J,L=function(e){c()(e).then((function(e){Y(e)})).catch((function(e){console.log("error",e)})).finally((function(){i(!1)}))},Y=function(e){g(e.data.map((function(e,t,a){if(0!==t){var n=Math.floor(b(Date.parse(a[t-1].datetime),Date.parse(e.datetime)));if(n>=1)return Array(n).fill("")}return e.datetime})));var t=e.data.map((function(e,t,a){if(0!==t){var n=Math.floor(b(Date.parse(a[t-1].datetime),Date.parse(e.datetime)));if(n>=1)return Array(n).fill(0)}return e.minValue})),a=e.data.map((function(e,t,a){if(0!==t){var n=Math.floor(b(Date.parse(a[t-1].datetime),Date.parse(e.datetime)));if(n>=1)return Array(n).fill(0)}return e.avgValue})),n=e.data.map((function(e,t,a){if(0!==t){var n=Math.floor(b(Date.parse(a[t-1].datetime),Date.parse(e.datetime)));if(n>=1)return Array(n).fill(0)}return e.maxValue}));h({min:t,middle:a,max:n}),i(!1)};return a?r.a.createElement("div",{className:"mainWindow"},r.a.createElement("h1",null,"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u043f\u043b\u0430\u0442\u044b")):r.a.createElement("div",{className:"mainWindow"},r.a.createElement("div",{className:"mainWindow-menu"},r.a.createElement(O,{fromDate:T,fromTime:x,toDate:V,toTime:F}),r.a.createElement(v,{deleg1:function(e){console.log(d+e),i(!0),L(d+e)},deleg2:function(e,t,a,n){S(e),A(t),W(a),R(n)}})),r.a.createElement(s,{labels:(J=m.flat(),J.map((function(e,t){return 0!==t&&t!==J.length-1?"":e.replace("T"," ").replace(/(:\d*\.\d*)/,"")}))),values:D}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e,t,a){e.exports=a(179)},64:function(e,t,a){},81:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.7e45da62.chunk.js.map